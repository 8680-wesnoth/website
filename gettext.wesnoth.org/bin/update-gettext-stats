#!/bin/bash
SVNCHECKOUTPATH=/usr/src/svn-checkouts/

echo update started at `date` >> $HOME/g.w.o-updates.log

#update the 1.10 checkout
cd $SVNCHECKOUTPATH/1.10/
#svn cleanup
svn -q up

#update the trunk checkout
cd $SVNCHECKOUTPATH/trunk/
#svn cleanup
svn -q up

#update the wescamp checkout
cd $SVNCHECKOUTPATH/wescamp-i18n/
for checkout in `find . -maxdepth 2 -mindepth 2`;do
    (cd $checkout; git pull)
done

#update the website checkout
cd $SVNCHECKOUTPATH/website/
svn -q up

#update the stats
cd $SVNCHECKOUTPATH/website/gettext.wesnoth.org
nice --adjustment=5 php grab-stats.php
#php grab-stats.php >> $HOME/g.w.o-updates.log
echo update completed at `date` >> $HOME/g.w.o-updates.log
