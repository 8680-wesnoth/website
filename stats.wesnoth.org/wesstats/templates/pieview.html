<!-- $Id$ -->
<!--
   Copyright (C) 2009 by Gregory Shikhman <cornmander@cornmander.com>
   Part of the Battle for Wesnoth Project http://www.wesnoth.org/

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License version 2
   or at your option any later version.
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY.

   See the COPYING file for more details.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:py="http://genshi.edgewall.org/" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['piechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', '${xlabel}');
        data.addColumn('number', '${ylabel}');
        data.addRows(${len(piedata)});
     	${data} 
        // Create and draw the visualization.
        new google.visualization.PieChart(document.getElementById('visualization')).
            draw(data, {title: '${title}'} );
      }      

      google.setOnLoadCallback(drawVisualization);
    </script>
</head>
<body>

<!--- <h3 py:for="view in views"><a href="${urllib.quote(view[1])}">${view[0]}</a></h3> -->
<div id="visualization" style="width: 300px; height: 300px;">
</div>
<div id="filter_box">
Used filters
<table border="1">
<tr py:for="filter in used_filters">
<td>${filter}</td>
<td py:for="val in ufilters_vals[filter]">
${val}
</td>
</tr>
</table>
<form method="get">
<table border="1">
<tr>
<td py:for="filter in filters">
${filter}
</td>
</tr>
<tr>
<td py:for="filter in filters">
<select name="${filter}" multiple="multiple" size="5">
<option py:for="item in sorted(fdata[filter])">${item}</option>
</select>
</td>
</tr>
</table>
<input type="submit" value="Submit" />
</form>
</div>
</body>
</html>
